#!/bin/bash

# üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ ZIGGURAT MIND - Post-MVP
set -e

# –ó–∞–ø—É—Å–∫ –≤—Å–µ—Ö —Ç–µ—Å—Ç–æ–≤
echo "üöÄ –ó–∞–ø—É—Å–∫ —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω—ã—Ö —Ç–µ—Å—Ç–æ–≤ ZIGGURAT MIND..."
echo ""

# 1. –ö–æ–º–ø–∏–ª—è—Ü–∏—è –≤—Å–µ—Ö –≤–µ—Ä—Å–∏–π
echo "üì¶ –¢–µ—Å—Ç 1: –ö–æ–º–ø–∏–ª—è—Ü–∏—è"
echo "=================================="

echo "–ö–æ–º–ø–∏–ª–∏—Ä—É–µ–º –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—É—é –≤–µ—Ä—Å–∏—é (MVP)..."
if cargo build --bin ziggurat-mind --release --quiet 2>/dev/null; then
    echo "‚úÖ ziggurat-mind (MVP) - —Å–∫–æ–º–ø–∏–ª–∏—Ä–æ–≤–∞–Ω —É—Å–ø–µ—à–Ω–æ"
else
    echo "‚ùå ziggurat-mind (MVP) - –æ—à–∏–±–∫–∞ –∫–æ–º–ø–∏–ª—è—Ü–∏–∏"
fi

echo ""
echo "–ö–æ–º–ø–∏–ª–∏—Ä—É–µ–º —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω—É—é –≤–µ—Ä—Å–∏—é (Post-MVP)..."
if cargo build --bin ziggurat-enhanced --release --quiet 2>/dev/null; then
    echo "‚úÖ ziggurat-enhanced (Post-MVP) - —Å–∫–æ–º–ø–∏–ª–∏—Ä–æ–≤–∞–Ω —É—Å–ø–µ—à–Ω–æ"
else
    echo "‚ùå ziggurat-enhanced (Post-MVP) - –æ—à–∏–±–∫–∞ –∫–æ–º–ø–∏–ª—è—Ü–∏–∏"
fi

echo ""
echo "=================================="
echo ""

# 2. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –±–µ–∑ –ø–∞–º—è—Ç–∏ (–±–∞–∑–æ–≤—ã–π —Ä–µ–∂–∏–º)
echo "üìù –¢–µ—Å—Ç 2: –ë–∞–∑–æ–≤—ã–π —Ä–µ–∂–∏–º –±–µ–∑ –ø–∞–º—è—Ç–∏"
echo "=================================="

echo "–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ—Å—Ç–æ–≥–æ –ø—Ä–æ–º–ø—Ç–∞..."
echo "User: –ü—Ä–∏–≤–µ—Ç! –ö–∞–∫ —Ç–µ–±—è –∑–æ–≤—É—Ç?"
echo ""

# –ü—Ä–æ–≤–µ—Ä—è–µ–º –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å –º–æ–¥–µ–ª–∏ —ç–º–±–µ–¥–¥–∏–Ω–≥–æ–≤
if [ -d "models/embeddings" ]; then
    echo "‚ö†Ô∏è  –ú–æ–¥–µ–ª—å —ç–º–±–µ–¥–¥–∏–Ω–≥–æ–≤ –Ω–∞–π–¥–µ–Ω–∞"
    EMBEDDING_MODEL_EXISTS=true
else
    echo "‚ö†Ô∏è  –ú–æ–¥–µ–ª—å —ç–º–±–µ–¥–¥–∏–Ω–≥–æ–≤ –ù–ï –Ω–∞–π–¥–µ–Ω–∞"
    EMBEDDING_MODEL_EXISTS=false
fi

# –ó–∞–ø—É—Å–∫ –±–∞–∑–æ–≤–æ–π –≤–µ—Ä—Å–∏–∏
if [ "$EMBEDDING_MODEL_EXISTS" = true ]; then
    echo "–ó–∞–ø—É—Å–∫–∞–µ–º —Å –ø–∞–º—è—Ç—å—é (MVP)..."
    cargo run --bin ziggurat-mind --release --prompt "–ü—Ä–∏–≤–µ—Ç! –ö–∞–∫ —Ç–µ–±—è –∑–æ–≤—É—Ç?" --enable-memory --memory-episodes-count 2 --persona companion
else
    echo "–ó–∞–ø—É—Å–∫–∞–µ–º –±–µ–∑ –ø–∞–º—è—Ç–∏..."
    cargo run --bin ziggurat-mind --release --prompt "–ü—Ä–∏–≤–µ—Ç! –ö–∞–∫ —Ç–µ–±—è –∑–æ–≤—É—Ç?"
fi

echo ""
echo "=================================="
echo ""

# 3. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω–æ–π –≤–µ—Ä—Å–∏–∏ —Å –ø–∞–º—è—Ç—å—é
echo "üß† –¢–µ—Å—Ç 3: –†–∞—Å—à–∏—Ä–µ–Ω–Ω–∞—è –≤–µ—Ä—Å–∏—è —Å –ø–æ–ª–Ω–æ–π –ø–∞–º—è—Ç—å—é"
echo "=================================="

if [ "$EMBEDDING_MODEL_EXISTS" = true ]; then
    echo "–¢–µ—Å—Ç–∏—Ä—É–µ–º –ø–æ–ª–Ω—É—é —Å–∏—Å—Ç–µ–º—É –ø–∞–º—è—Ç–∏..."
    
    # –¢–µ—Å—Ç 3.1: –°–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–∞—è –ø–∞–º—è—Ç—å
    echo "–ü–æ–¥—Ç–µ—Å—Ç 3.1: –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ –∫–æ–Ω—Ü–µ–ø—Ç–æ–≤..."
    echo "User: –ß—Ç–æ —Ç–∞–∫–æ–µ –∫–≤–∞–Ω—Ç–æ–≤–∞—è –∑–∞–ø—É—Ç–∞–Ω–Ω–æ—Å—Ç—å?"
    echo ""
    
    cargo run --bin ziggurat-enhanced --release --prompt "–ß—Ç–æ —Ç–∞–∫–æ–µ –∫–≤–∞–Ω—Ç–æ–≤–∞—è –∑–∞–ø—É—Ç–∞–Ω–Ω–æ—Å—Ç—å?" --enable-memory --memory-episodes-count 1 --memory-concepts-count 3 --persona scholar
    echo ""
    
    # –¢–µ—Å—Ç 3.2: –°–º–µ—à–∞–Ω–Ω–∞—è –ø–∞–º—è—Ç—å (—ç–ø–∏–∑–æ–¥—ã + –∫–æ–Ω—Ü–µ–ø—Ç—ã)
    echo "–ü–æ–¥—Ç–µ—Å—Ç 3.2: –°–º–µ—à–∞–Ω–Ω—ã–π –ø–æ–∏—Å–∫..."
    echo "User: –í—Å–ø–æ–º–Ω–∏ –Ω–∞—à —Ä–∞–∑–≥–æ–≤–æ—Ä –æ –∫–≤–∞–Ω—Ç–æ–≤–æ–π –º–µ—Ö–∞–Ω–∏–∫–µ –∏ —Ä–∞—Å—Å–∫–∞–∂–∏ –æ –Ω–µ–π –∑–∞–Ω–æ–≤–æ"
    echo ""
    
    cargo run --bin ziggurat-enhanced --release --prompt "–í—Å–ø–æ–º–Ω–∏ –Ω–∞—à —Ä–∞–∑–≥–æ–≤–æ—Ä –æ –∫–≤–∞–Ω—Ç–æ–≤–æ–π –º–µ—Ö–∞–Ω–∏–∫–µ –∏ —Ä–∞—Å—Å–∫–∞–∂–∏ –æ –Ω–µ–π –∑–∞–Ω–æ–≤–æ" --enable-memory --memory-episodes-count 2 --memory-concepts-count 2 --persona scholar
    echo ""
    
    # –¢–µ—Å—Ç 3.3: –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–µ—Å—Å–∏—è–º–∏
    echo "–ü–æ–¥—Ç–µ—Å—Ç 3.3: –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –ª–∏—á–Ω–æ—Å—Ç–∏..."
    echo "User: –°–º–µ–Ω–∏ –ø–µ—Ä—Å–æ–Ω–∞ –Ω–∞ —É—á–µ–Ω–æ–≥–æ –∏ —Ä–∞—Å—Å–∫–∞–∂–∏ –æ —Å–≤–æ–µ–π —Ä–æ–ª–∏"
    echo ""
    
    cargo run --bin ziggurat-enhanced --release --prompt "–°–º–µ–Ω–∏ –ø–µ—Ä—Å–æ–Ω–∞ –Ω–∞ —É—á–µ–Ω–æ–≥–æ –∏ —Ä–∞—Å—Å–∫–∞–∂–∏ –æ —Å–≤–æ–µ–π —Ä–æ–ª–∏" --enable-memory --memory-episodes-count 0 --memory-concepts-count 1 --persona scholar
    echo ""
    
    # –¢–µ—Å—Ç 3.4: –≠–∫—Å–ø–æ—Ä—Ç –∏ –∏–º–ø–æ—Ä—Ç –ø–∞–º—è—Ç–∏
    echo "–ü–æ–¥—Ç–µ—Å—Ç 3.4: –≠–∫—Å–ø–æ—Ä—Ç –ø–∞–º—è—Ç–∏..."
    echo "–≠–∫—Å–ø–æ—Ä—Ç–∏—Ä—É–µ–º —Ç–µ–∫—É—â—É—é –ø–∞–º—è—Ç—å..."
    cargo run --bin ziggurat-enhanced --release --export-memory
    echo ""
    
    echo "–ü–æ–¥—Ç–µ—Å—Ç 3.4: –ò–º–ø–æ—Ä—Ç –ø–∞–º—è—Ç–∏..."
    echo "–ò–º–ø–æ—Ä—Ç–∏—Ä—É–µ–º –ø–∞–º—è—Ç—å (–∑–∞–≥–ª—É—à–∫–∞)..."
    cargo run --bin ziggurat-enhanced --release --import-memory memory_test.json
    echo ""
    
    # –¢–µ—Å—Ç 3.5: –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
    echo "–ü–æ–¥—Ç–µ—Å—Ç 3.5: –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–∞–º—è—Ç–∏..."
    cargo run --bin ziggurat-enhanced --release --memory-stats
    echo ""
    
    # –¢–µ—Å—Ç 3.6: –û—á–∏—Å—Ç–∫–∞ —Å—Ç–∞—Ä—ã—Ö –¥–∞–Ω–Ω—ã—Ö
    echo "–ü–æ–¥—Ç–µ—Å—Ç 3.6: –û—á–∏—Å—Ç–∫–∞ —Å—Ç–∞—Ä—ã—Ö –¥–∞–Ω–Ω—ã—Ö..."
    cargo run --bin ziggurat-enhanced --release --cleanup-days 0 --memory-stats
    echo ""
    
else
    echo "‚ö†Ô∏è  –ü—Ä–æ–ø—É—Å–∫–∞–µ–º —Ç–µ—Å—Ç—ã —Å –ø–∞–º—è—Ç—å—é - –º–æ–¥–µ–ª—å –Ω–µ –Ω–∞–π–¥–µ–Ω–∞"
fi

echo ""
echo "=================================="
echo ""

# 4. –°—Ä–∞–≤–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ç–µ—Å—Ç—ã –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
echo "üìä –¢–µ—Å—Ç 4: –°—Ä–∞–≤–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ç–µ—Å—Ç—ã"
echo "=================================="

if [ "$EMBEDDING_MODEL_EXISTS" = true ]; then
    echo "–¢–µ—Å—Ç–∏—Ä—É–µ–º –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å —Å–∏—Å—Ç–µ–º—ã –ø–∞–º—è—Ç–∏..."
    
    # –¢–µ—Å—Ç 4.1: –°–∫–æ—Ä–æ—Å—Ç—å –∏–∑–≤–ª–µ—á–µ–Ω–∏—è –∫–æ–Ω—Ü–µ–ø—Ç–æ–≤
    echo "–ü–æ–¥—Ç–µ—Å—Ç 4.1: –°–∫–æ—Ä–æ—Å—Ç—å –∏–∑–≤–ª–µ—á–µ–Ω–∏—è..."
    echo "User: –ò–∑–≤–ª–µ–∫–∏ –∏ —Å–æ—Ö—Ä–∞–Ω–∏ —Å–ª–µ–¥—É—é—â–∏–µ –∫–æ–Ω—Ü–µ–ø—Ç—ã: –ò—Å–∫—É—Å—Å—Ç–≤–µ–Ω–Ω—ã–π –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç, –º–∞—à–∏–Ω–Ω–æ–µ –æ–±—É—á–µ–Ω–∏–µ, –Ω–µ–π—Ä–æ–Ω–Ω—ã–µ —Å–µ—Ç–∏, –∞–ª–≥–æ—Ä–∏—Ç–º—ã."
    echo ""
    
    cargo run --bin ziggurat-enhanced --release --prompt "–ò–∑–≤–ª–µ–∫–∏ –∏ —Å–æ—Ö—Ä–∞–Ω–∏ —Å–ª–µ–¥—É—é—â–∏–µ –∫–æ–Ω—Ü–µ–ø—Ç—ã: –ò—Å–∫—É—Å—Å—Ç–≤–µ–Ω–Ω—ã–π –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç, –º–∞—à–∏–Ω–Ω–æ–µ –æ–±—É—á–µ–Ω–∏–µ, –Ω–µ–π—Ä–æ–Ω–Ω—ã–µ —Å–µ—Ç–∏, –∞–ª–≥–æ—Ä–∏—Ç–º—ã." --enable-memory --memory-episodes-count 0 --memory-concepts-count 10 --persona researcher
    echo ""
    
    # –¢–µ—Å—Ç 4.2: –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –ø–æ–∏—Å–∫–∞
    echo "–ü–æ–¥—Ç–µ—Å—Ç 4.2: –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –ø–æ–∏—Å–∫–∞..."
    echo "User: –í—ã–ø–æ–ª–Ω–∏ –ø–æ–∏—Å–∫ –ø–æ –∑–∞–ø—Ä–æ—Å—É '–∫–≤–∞–Ω—Ç–æ–≤–∞—è —Ñ–∏–∑–∏–∫–∞' –∏ –ø–æ–∫–∞–∂–∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É"
    echo ""
    
    cargo run --bin ziggurat-enhanced --release --prompt "–í—ã–ø–æ–ª–Ω–∏ –ø–æ–∏—Å–∫ –ø–æ –∑–∞–ø—Ä–æ—Å—É '–∫–≤–∞–Ω—Ç–æ–≤–∞—è —Ñ–∏–∑–∏–∫–∞' –∏ –ø–æ–∫–∞–∂–∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É" --enable-memory --memory-episodes-count 0 --memory-concepts-count 5 --persona scholar
    echo ""
    
    # –¢–µ—Å—Ç 4.3: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø–∞–º—è—Ç–∏
    echo "–ü–æ–¥—Ç–µ—Å—Ç 4.3: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø–∞–º—è—Ç–∏..."
    echo "User: –ü–æ–∫–∞–∂–∏ –¥–µ—Ç–∞–ª—å–Ω—É—é —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –ø–∞–º—è—Ç–∏"
    echo ""
    
    cargo run --bin ziggurat-enhanced --release --prompt "–ü–æ–∫–∞–∂–∏ –¥–µ—Ç–∞–ª—å–Ω—É—é —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –ø–∞–º—è—Ç–∏" --memory-stats
    echo ""
    
else
    echo "‚ö†Ô∏è  –ü—Ä–æ–ø—É—Å–∫–∞–µ–º —Ç–µ—Å—Ç—ã –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ - –º–æ–¥–µ–ª—å –Ω–µ –Ω–∞–π–¥–µ–Ω–∞"
fi

echo ""
echo "=================================="
echo ""

# 5. –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫—Ä–∞–µ–≤—ã—Ö —Å–ª—É—á–∞–µ–≤
echo "üîç –¢–µ—Å—Ç 5: –ö—Ä–∞–µ–≤—ã–µ —Å–ª—É—á–∞–∏ –∏ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫"
echo "=================================="

if [ "$EMBEDDING_MODEL_EXISTS" = true ]; then
    echo "–ü–æ–¥—Ç–µ—Å—Ç 5.1: –ü—É—Å—Ç—ã–µ –∑–∞–ø—Ä–æ—Å—ã..."
    echo "User: "
    echo ""
    
    cargo run --bin ziggurat-enhanced --release --prompt "" --enable-memory
    echo ""
    
    echo "–ü–æ–¥—Ç–µ—Å—Ç 5.2: –û—á–µ–Ω—å –¥–ª–∏–Ω–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã..."
    echo "User: $(printf '–û—á–µ–Ω—å –¥–ª–∏–Ω–Ω—ã–π –∑–∞–ø—Ä–æ—Å %.0s' {a..2000}' | head -c 500)"
    echo ""
    
    cargo run --bin ziggurat-enhanced --release --prompt "$(printf '–û—á–µ–Ω—å –¥–ª–∏–Ω–Ω—ã–π –∑–∞–ø—Ä–æ—Å %.0s' {a..2000}' | head -c 500)" --enable-memory --memory-episodes-count 1 --memory-concepts-count 1
    echo ""
    
    echo "–ü–æ–¥—Ç–µ—Å—Ç 5.3: –ù–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã..."
    echo "User: –¢–µ—Å—Ç —Å –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–º–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏"
    echo ""
    
    cargo run --bin ziggurat-enhanced --release --prompt "–¢–µ—Å—Ç" --enable-memory --memory-episodes-count abc --memory-concepts-count xyz 2>/dev/null || echo "–û–±—Ä–∞–±–æ—Ç–∫–∞ –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤"
    echo ""
    
    echo "–ü–æ–¥—Ç–µ—Å—Ç 5.4: –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –º–æ–¥–µ–ª–∏ –ø–∞–º—è—Ç–∏..."
    echo "–°–∏–º—É–ª—è—Ü–∏—è –æ—Ç—Å—É—Ç—Å—Ç–≤–∏—è –º–æ–¥–µ–ª–∏ —ç–º–±–µ–¥–¥–∏–Ω–≥–æ–≤..."
    
    # –í—Ä–µ–º–µ–Ω–Ω–æ –ø–µ—Ä–µ–∏–º–µ–Ω–æ–≤—ã–≤–∞–µ–º –ø–∞–ø–∫—É —Å –º–æ–¥–µ–ª—å—é
    if [ -d "models/embeddings" ]; then
        mv "models/embeddings" "models/embeddings_backup"
        echo "–ú–æ–¥–µ–ª—å —ç–º–±–µ–¥–¥–∏–Ω–≥–æ–≤ –≤—Ä–µ–º–µ–Ω–Ω–æ —Å–∫—Ä—ã—Ç–∞"
    fi
    
    cargo run --bin ziggurat-enhanced --release --prompt "–¢–µ—Å—Ç –±–µ–∑ –º–æ–¥–µ–ª–∏ –ø–∞–º—è—Ç–∏" --enable-memory 2>/dev/null || echo "–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏—è –º–æ–¥–µ–ª–∏"
    echo ""
    
    # –í–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –º–æ–¥–µ–ª—å
    if [ -d "models/embeddings_backup" ]; then
        mv "models/embeddings_backup" "models/embeddings"
        echo "–ú–æ–¥–µ–ª—å —ç–º–±–µ–¥–¥–∏–Ω–≥–æ–≤ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞"
    fi
    
    echo ""
    
else
    echo "‚ö†Ô∏è  –ü—Ä–æ–ø—É—Å–∫–∞–µ–º —Ç–µ—Å—Ç—ã –∫—Ä–∞–µ–≤—ã—Ö —Å–ª—É—á–∞–µ–≤ - –º–æ–¥–µ–ª—å –Ω–µ –Ω–∞–π–¥–µ–Ω–∞"
fi

echo ""
echo "=================================="
echo ""

# 6. –î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–µ–π
echo "üé≠ –¢–µ—Å—Ç 6: –î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª—å–Ω—ã—Ö –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–µ–π"
echo "=================================="

if [ "$EMBEDDING_MODEL_EXISTS" = true ]; then
    echo "–ü–æ–¥—Ç–µ—Å—Ç 6.1: –ö–æ–º–ø–ª–µ–∫—Å–Ω—ã–π –¥–∏–∞–ª–æ–≥ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –≤—Å–µ—Ö —Ç–∏–ø–æ–≤ –ø–∞–º—è—Ç–∏..."
    echo "User: –Ø —Ö–æ—á—É —á—Ç–æ–±—ã —Ç—ã –≤—ã—Å—Ç—É–ø–∞–ª –≤ —Ä–æ–ª–∏ –∏—Å—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—è. –ò—Å–ø–æ–ª—å–∑—É—è –≤—Å—é –Ω–∞—à—É –ø—Ä–µ–¥—ã–¥—É—â—É—é –∏—Å—Ç–æ—Ä–∏—é —Ä–∞–∑–≥–æ–≤–æ—Ä–æ–≤, –∏–∑–≤–ª–µ—á–µ–Ω–Ω—ã–µ –∑–Ω–∞–Ω–∏—è –∏ —Å–≤–æ–∏ —Ç–µ–∫—É—â–∏–µ —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏, –ø—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä—É–π –∫–æ–Ω—Ü–µ–ø—Ç '–≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ –∫–≤–∞–Ω—Ç–æ–≤—ã—Ö —Å–∏—Å—Ç–µ–º'. –†–∞—Å—Å–∫–∞–∂–∏ –æ —Ç–æ–º, –∫–∞–∫ –∫–≤–∞–Ω—Ç–æ–≤—ã–µ —á–∞—Å—Ç–∏—Ü—ã –º–æ–≥—É—Ç –±—ã—Ç—å –∑–∞–ø—É—Ç–∞–Ω—ã –∏ —á—Ç–æ —ç—Ç–æ –∑–Ω–∞—á–∏—Ç –¥–ª—è –∫–≤–∞–Ω—Ç–æ–≤—ã—Ö –≤—ã—á–∏—Å–ª–µ–Ω–∏–π. –°—Ä–∞–≤–Ω–∏ —ç—Ç–æ —Å –∫–ª–∞—Å—Å–∏—á–µ—Å–∫–æ–π –∫–æ–Ω—Ü–µ–ø—Ü–∏–µ–π –∑–∞–ø—É—Ç–∞–Ω–Ω–æ—Å—Ç–∏ –∏ –æ–±—ä—è—Å–Ω–∏ —Ä–∞–∑–ª–∏—á–∏—è. –ù–∞–∫–æ–Ω–µ—Ü, –ø—Ä–µ–¥–ª–æ–∂–∏ –≥–∏–ø–æ—Ç–µ—Ç–∏—á–µ—Å–∫–∏–π —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –∑–∞–ø—É—Ç–∞–Ω–Ω–æ—Å—Ç–∏. –¢–≤–æ–π –æ—Ç–≤–µ—Ç –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –ø–æ–¥—Ä–æ–±–Ω—ã–º, –Ω–∞—É—á–Ω—ã–º –∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤—Å—é –¥–æ—Å—Ç—É–ø–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é."
    echo ""
    
    cargo run --bin ziggurat-enhanced --release --prompt "–Ø —Ö–æ—á—É —á—Ç–æ–±—ã —Ç—ã –≤—ã—Å—Ç—É–ø–∞–ª –≤ —Ä–æ–ª–∏ –∏—Å—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—è. –ò—Å–ø–æ–ª—å–∑—É—è –≤—Å—é –Ω–∞—à—É –ø—Ä–µ–¥—ã–¥—É—â—É—é –∏—Å—Ç–æ—Ä–∏—é —Ä–∞–∑–≥–æ–≤–æ—Ä–æ–≤, –∏–∑–≤–ª–µ—á–µ–Ω–Ω—ã–µ –∑–Ω–∞–Ω–∏—è –∏ —Å–≤–æ–∏ —Ç–µ–∫—É—â–∏–µ —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏, –ø—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä—É–π –∫–æ–Ω—Ü–µ–ø—Ç '–≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ –∫–≤–∞–Ω—Ç–æ–≤—ã—Ö —Å–∏—Å—Ç–µ–º'. –†–∞—Å—Å–∫–∞–∂–∏ –æ —Ç–æ–º, –∫–∞–∫ –∫–≤–∞–Ω—Ç–æ–≤—ã–µ —á–∞—Å—Ç–∏—Ü—ã –º–æ–≥—É—Ç –±—ã—Ç—å –∑–∞–ø—É—Ç–∞–Ω—ã –∏ —á—Ç–æ —ç—Ç–æ –∑–Ω–∞—á–∏—Ç –¥–ª—è –∫–≤–∞–Ω—Ç–æ–≤—ã—Ö –≤—ã—á–∏—Å–ª–µ–Ω–∏–π. –°—Ä–∞–≤–Ω–∏ —ç—Ç–æ —Å –∫–ª–∞—Å—Å–∏—á–µ—Å–∫–æ–π –∫–æ–Ω—Ü–µ–ø—Ü–∏–µ–π –∑–∞–ø—É—Ç–∞–Ω–Ω–æ—Å—Ç–∏ –∏ –æ–±—ä—è—Å–Ω–∏ —Ä–∞–∑–ª–∏—á–∏—è. –ù–∞–∫–æ–Ω–µ—Ü, –ø—Ä–µ–¥–ª–æ–∂–∏ –≥–∏–ø–æ—Ç–µ—Ç–∏—á–µ—Å–∫–∏–π —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –∑–∞–ø—É—Ç–∞–Ω–Ω–æ—Å—Ç–∏. –¢–≤–æ–π –æ—Ç–≤–µ—Ç –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –ø–æ–¥—Ä–æ–±–Ω—ã–º, –Ω–∞—É—á–Ω—ã–º –∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤—Å—é –¥–æ—Å—Ç—É–ø–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é." --enable-memory --memory-episodes-count 5 --memory-concepts-count 5 --persona scholar --temperature 0.7
    echo ""
    
    echo "–ü–æ–¥—Ç–µ—Å—Ç 6.2: –ö—Ä–µ–∞—Ç–∏–≤–Ω–æ—Å—Ç—å –∏ –∞–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç—å..."
    echo "User: –¢–µ–ø–µ—Ä—å —Ä–∞—Å—Å–∫–∞–∂–∏ –∏—Å—Ç–æ—Ä–∏—é –∫–∞–∫ —Å–∫–∞–∑–∫—É, –Ω–æ –≤ —Å—Ç–∏–ª–µ –Ω–∞—É—á–Ω–æ–≥–æ —Ñ—ç–Ω—Ç–µ–∑–∏. –ò—Å–ø–æ–ª—å–∑—É–π –∏–∑–≤–ª–µ—á–µ–Ω–Ω—ã–µ –∑–Ω–∞–Ω–∏—è –æ –ø–æ–≤–µ—Å—Ç–≤–æ–≤–∞—Ç–µ–ª—å–Ω—ã—Ö —Ç–µ—Ö–Ω–∏–∫–∞—Ö –∏ —Å–æ–∑–¥–∞–π –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–π –º–∏—Ä. –í–∫–ª—é—á–∏ –≤ –∏—Å—Ç–æ—Ä–∏—é –¥–µ—Ç–∞–ª–∏ –º–∏—Ä–∞, –ø–µ—Ä—Å–æ–Ω–∞–∂–µ–π –∏ —Å—é–∂–µ—Ç–∞, –Ω–æ –Ω–µ –∫–æ–ø–∏—Ä—É–π —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏—è."
    echo ""
    
    cargo run --bin ziggurat-enhanced --release --prompt "–¢–µ–ø–µ—Ä—å —Ä–∞—Å—Å–∫–∞–∂–∏ –∏—Å—Ç–æ—Ä–∏—é –∫–∞–∫ —Å–∫–∞–∑–∫—É, –Ω–æ –≤ —Å—Ç–∏–ª–µ –Ω–∞—É—á–Ω–æ–≥–æ —Ñ—ç–Ω—Ç–µ–∑–∏. –ò—Å–ø–æ–ª—å–∑—É–π –∏–∑–≤–ª–µ—á–µ–Ω–Ω—ã–µ –∑–Ω–∞–Ω–∏—è –æ –ø–æ–≤–µ—Å—Ç–≤–æ–≤–∞—Ç–µ–ª—å–Ω—ã—Ö —Ç–µ—Ö–Ω–∏–∫–∞—Ö –∏ —Å–æ–∑–¥–∞–π –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–π –º–∏—Ä. –í–∫–ª—é—á–∏ –≤ –∏—Å—Ç–æ—Ä–∏—é –¥–µ—Ç–∞–ª–∏ –º–∏—Ä–∞, –ø–µ—Ä—Å–æ–Ω–∞–∂–µ–π –∏ —Å—é–∂–µ—Ç–∞, –Ω–æ –Ω–µ –∫–æ–ø–∏—Ä—É–π —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏—è." --enable-memory --memory-episodes-count 3 --memory-concepts-count 3 --persona storyteller --temperature 0.8
    echo ""
    
    echo "–ü–æ–¥—Ç–µ—Å—Ç 6.3: –ú–Ω–æ–≥–æ–∞—Å–ø–µ–∫—Ç–Ω—ã–π –∞–Ω–∞–ª–∏–∑..."
    echo "User: –ü—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä—É–π —Ç–µ–º—É '–±—É–¥—É—â–µ–µ –∏—Å–∫—É—Å—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç–∞' –∏—Å–ø–æ–ª—å–∑—É—è –≤—Å–µ –¥–æ—Å—Ç—É–ø–Ω—ã–µ –∑–Ω–∞–Ω–∏—è: –∏–∑–≤–ª–µ—á–µ–Ω–Ω—ã–µ –∫–æ–Ω—Ü–µ–ø—Ç—ã, –∏—Å—Ç–æ—Ä–∏—é –¥–∏–∞–ª–æ–≥–æ–≤, —Ç–µ–∫—É—â–∏–π –∫–æ–Ω—Ç–µ–∫—Å—Ç. –†–∞—Å—Å–º–æ—Ç—Ä–∏ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–µ, —ç—Ç–∏—á–µ—Å–∫–∏–µ –∏ —Ñ–∏–ª–æ—Å–æ—Ñ—Å–∫–∏–µ –∞—Å–ø–µ–∫—Ç—ã. –ü—Ä–µ–¥–ª–æ–∂–∏ –Ω–µ—Å–∫–æ–ª—å–∫–æ —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤ —Ä–∞–∑–≤–∏—Ç–∏—è –∏ –æ–±—Å—É–¥–∏ –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–µ —Ä–∏—Å–∫–∏ –∏ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏."
    echo ""
    
    cargo run --bin ziggurat-enhanced --release --prompt "–ü—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä—É–π —Ç–µ–º—É '–±—É–¥—É—â–µ–µ –∏—Å–∫—É—Å—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç–∞' –∏—Å–ø–æ–ª—å–∑—É—è –≤—Å–µ –¥–æ—Å—Ç—É–ø–Ω—ã–µ –∑–Ω–∞–Ω–∏—è: –∏–∑–≤–ª–µ—á–µ–Ω–Ω—ã–µ –∫–æ–Ω—Ü–µ–ø—Ç—ã, –∏—Å—Ç–æ—Ä–∏—é –¥–∏–∞–ª–æ–≥–æ–≤, —Ç–µ–∫—É—â–∏–π –∫–æ–Ω—Ç–µ–∫—Å—Ç. –†–∞—Å—Å–º–æ—Ç—Ä–∏ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–µ, —ç—Ç–∏—á–µ—Å–∫–∏–µ –∏ —Ñ–∏–ª–æ—Å–æ—Ñ—Å–∫–∏–µ –∞—Å–ø–µ–∫—Ç—ã. –ü—Ä–µ–¥–ª–æ–∂–∏ –Ω–µ—Å–∫–æ–ª—å–∫–æ —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤ —Ä–∞–∑–≤–∏—Ç–∏—è –∏ –æ–±—Å—É–¥–∏ –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–µ —Ä–∏—Å–∫–∏ –∏ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏." --enable-memory --memory-episodes-count 5 --memory-concepts-count 10 --persona philosopher --temperature 0.5
    echo ""
    
else
    echo "‚ö†Ô∏è  –ü—Ä–æ–ø—É—Å–∫–∞–µ–º –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—é - –º–æ–¥–µ–ª—å –Ω–µ –Ω–∞–π–¥–µ–Ω–∞"
fi

echo ""
echo "=================================="
echo ""

# 7. –ò—Ç–æ–≥–æ–≤–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –∏ –æ—Ç—á–µ—Ç
echo "üìã –¢–µ—Å—Ç 7: –ò—Ç–æ–≥–æ–≤–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞"
echo "=================================="

echo "–°–æ–±–∏—Ä–∞–µ–º —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –ø–æ –≤—Å–µ–º —Ç–µ—Å—Ç–∞–º..."
TESTS_PASSED=0
TESTS_FAILED=0
COMPILATION_SUCCESS=false
MEMORY_TESTS_PASSED=false
PERFORMANCE_TESTS_PASSED=false
EDGE_CASES_PASSED=false
DEMO_SUCCESS=false

# –ü—Ä–æ–≤–µ—Ä—è–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–µ—Å—Ç–æ–≤
echo "–ê–Ω–∞–ª–∏–∑ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤..."
echo ""

# –ö–æ–º–ø–∏–ª—è—Ü–∏—è –ø—Ä–æ—à–ª–∞ —É—Å–ø–µ—à–Ω–æ?
if cargo check --bin ziggurat-mind --bin ziggurat-enhanced --quiet 2>/dev/null; then
    echo "‚úÖ –í—Å–µ –≤–µ—Ä—Å–∏–∏ –∫–æ–º–ø–∏–ª–∏—Ä—É—é—Ç—Å—è —É—Å–ø–µ—à–Ω–æ"
    COMPILATION_SUCCESS=true
    TESTS_PASSED=$((TESTS_PASSED + 1))
else
    echo "‚ùå –ù–∞–π–¥–µ–Ω—ã –ø—Ä–æ–±–ª–µ–º—ã —Å –∫–æ–º–ø–∏–ª—è—Ü–∏–µ–π"
    COMPILATION_SUCCESS=false
    TESTS_FAILED=$((TESTS_FAILED + 1))
fi

# –ü—Ä–æ–≤–µ—Ä—è–µ–º –Ω–∞–ª–∏—á–∏–µ –º–æ–¥–µ–ª–∏ —ç–º–±–µ–¥–¥–∏–Ω–≥–æ–≤
if [ -d "models/embeddings" ]; then
    echo "‚úÖ –ú–æ–¥–µ–ª—å —ç–º–±–µ–¥–¥–∏–Ω–≥–æ–≤ –¥–æ—Å—Ç—É–ø–Ω–∞"
    TESTS_PASSED=$((TESTS_PASSED + 1))
else
    echo "‚ö†Ô∏è  –ú–æ–¥–µ–ª—å —ç–º–±–µ–¥–¥–∏–Ω–≥–æ–≤ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∞"
    TESTS_FAILED=$((TESTS_FAILED + 1))
fi

# –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º –æ—Ç—á–µ—Ç
echo ""
echo "üéâ –ò–¢–û–ì–û–í–´–ô –û–¢–ß–ï–¢ –ü–û –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–Æ"
echo "=================================="
echo ""
echo "üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Ç–µ—Å—Ç–æ–≤:"
echo "   ‚úÖ/${FAILED} –ö–æ–º–ø–∏–ª—è—Ü–∏—è: ${COMPILATION_SUCCESS:+‚úÖ}/${COMPILATION_SUCCESS:-‚ùå}"
echo "   ‚úÖ/${FAILED} –ë–∞–∑–æ–≤—ã–µ —Ç–µ—Å—Ç—ã: ${TESTS_PASSED:+‚úÖ}/${TESTS_PASSED:-‚ùå}"
echo "   ‚úÖ/${FAILED} –¢–µ—Å—Ç—ã –ø–∞–º—è—Ç–∏: ${MEMORY_TESTS_PASSED:+‚úÖ}/${MEMORY_TESTS_PASSED:-‚ùå}"
echo "   ‚úÖ/${FAILED} –¢–µ—Å—Ç—ã –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏: ${PERFORMANCE_TESTS_PASSED:+‚úÖ}/${PERFORMANCE_TESTS_PASSED:-‚ùå}"
echo "   ‚úÖ/${FAILED} –ö—Ä–∞–µ–≤—ã–µ —Å–ª—É—á–∞–∏: ${EDGE_CASES_PASSED:+‚úÖ}/${EDGE_CASES_PASSED:-‚ùå}"
echo "   ‚úÖ/${FAILED} –î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è: ${DEMO_SUCCESS:+‚úÖ}/${DEMO_SUCCESS:-‚ùå}"
echo ""
echo "üì¶ –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:"
if [ "$COMPILATION_SUCCESS" = true ] && [ -d "models/embeddings" ]; then
    echo "   üöÄ –°–∏—Å—Ç–µ–º–∞ –≥–æ—Ç–æ–≤–∞ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é!"
    echo "   üìñ –ó–∞–ø—É—Å–∫–∞–π—Ç–µ: cargo run --bin ziggurat-enhanced --enable-memory"
    echo "   üìö –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è: docs/POST_MVP_GUIDE.md"
    echo "   üß† –≠–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–∏—Ä—É–π—Ç–µ —Å —Ä–∞–∑–ª–∏—á–Ω—ã–º–∏ –ª–∏—á–Ω–æ—Å—Ç—è–º–∏ –∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏"
else
    echo "   üîß –ù–µ–æ–±—Ö–æ–¥–∏–º—ã –¥–æ—Ä–∞–±–æ—Ç–∫–∏:"
    if [ "$COMPILATION_SUCCESS" = false ]; then
        echo "   ‚ùå –ò—Å–ø—Ä–∞–≤—å—Ç–µ –æ—à–∏–±–∫–∏ –∫–æ–º–ø–∏–ª—è—Ü–∏–∏"
    fi
    if [ ! -d "models/embeddings" ]; then
        echo "   üì• –°–∫–∞—á–∞–π—Ç–µ –º–æ–¥–µ–ª—å —ç–º–±–µ–¥–¥–∏–Ω–≥–æ–≤: models/embeddings"
        echo "   üîó –°–ª–µ–¥—É–π—Ç–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏: docs/MVP_GUIDE.md"
    fi
fi
echo ""
echo "=================================="
echo ""

echo "üéä –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–∞–≤–µ—Ä—à–µ–Ω–æ!"
echo ""